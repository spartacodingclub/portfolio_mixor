<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Portfolio Mixor</title>
    <link rel="stylesheet" type="text/css" href="ui.css">
    <link rel=" stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>


    출처: https://blog.goodkiss.co.kr/entry/jQuery-autocomplete자동완성기능-사용방법-XML-JSON [ollagaza's story]
    <script>
        google.charts.load('current', { packages: ['corechart', 'line'] });
        google.charts.setOnLoadCallback(drawBasic);

        function drawBasic() {

            var data = new google.visualization.DataTable();
            data.addColumn('number', 'X');
            data.addColumn('number', '원화');

            data.addRows([
                [2000, 0], [2001, 10], [2002, 23], [2003, 17], [2004, 18], [2005, 9],
                [2006, 11], [2007, 27], [2008, 33], [2009, 40], [2010, 32], [2011, 35],
                [2012, 30], [2013, 40], [2014, 42], [2015, 47], [2016, 44], [2017, 48],
                [2018, 52], [2019, 54], [2020, 42]
            ]);

            var options = {
                hAxis: {
                    title: '시간 (연도)'
                },
                vAxis: {
                    title: '포트폴리오 성과'
                },
                width: 700,
                height: 400


            };

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

            chart.draw(data, options);
        }
    </script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script>
        function refresh() {
            location.reload(true)
        }


        function openclose() {
            let x1 = $('#start_money').val()
            let x2 = $('#stock_1').val()
            let x3 = $('#portion').val()
            if ($('#exampleFormControlSelect1').val() >= $('#exampleFormControlSelect2').val()) {
                alert('시작연도는 마지막 연도 이전이어야 합니다')
            }
            else if (x1 == "") {
                alert("시작금액을 입력하세요");
                $('#start_money').focus();
            }
            else if (x1 != "" && x1 < 100000) {
                alert('시작금액은 100,000원부터 가능합니다. ');
                $('#start_moneu').focus();
            }
            else if (x1 != "" && x2 == "") {
                alert("종목을 입력하세요");
                $('#stock_1').focus();
            }

            else if (x1 != "" && x2 != "" && x3 == "") {
                alert("비율을 입력하세요");
                $('#portion').focus();
            }
            else if (x1 != "" && x2 != "" && x3 > 100) {
                alert('비율은 100 미만이어야 합니다');
            }


            else {
                $('#second_page').show()
            }


        }
        $(function () {

            $('input.num_only').on('keyup', function () {
                var cnt = $(".exam input.num_sum").length;
                console.log(cnt);

                for (var i = 1; i < cnt; i++) {
                    var sum = parseInt($(this).val() || 0);
                    sum++
                    console.log(sum);
                }

                var sum1 = parseInt($("#portion").val() || 0); // input 값을 가져오며 계산하지만 값이 없을경우 0이 대입된다  뒷부분에 ( || 0 ) 없을경우 합계에 오류가 생겨 NaN 값이 떨어진다
                var sum2 = parseInt($("#portion2").val() || 0);
                var sum3 = parseInt($("#portion3").val() || 0);
                var sum4 = parseInt($("#portion4").val() || 0);
                var sum5 = parseInt($("#portion5").val() || 0);
                var sum6 = parseInt($("#portion6").val() || 0);
                var sum7 = parseInt($("#portion7").val() || 0);
                var sum7 = parseInt($("#portion8").val() || 0);
                var sum7 = parseInt($("#portion9").val() || 0);
                var sum7 = parseInt($("#portion10").val() || 0);
                var sum = sum1 + sum2 + sum3 + sum4 + sum5 + sum6 + sum7 + sum8 + sum9 + sum10;
                console.log(sum);
                $("#portion_total").val(sum);
            });



        });
    </script>
    <script type="text/javascript">
        // Load google charts
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        // Draw the chart and set the chart values
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Task', 'Hours per Day'],
                ['Work', 8],
                ['Friends', 2],
                ['Eat', 2],
                ['TV', 2],
                ['Gym', 2],
                ['Sleep', 8]
            ]);

            // Optional; add a title and set the width and height of the chart
            var options = { 'title': '나의 포트폴리오', 'width': 650, 'height': 500 };

            // Display the chart inside the <div> element with id="piechart"
            var chart = new google.visualization.PieChart(document.getElementById('piechart'));
            chart.draw(data, options);
        }

    </script>
    <script>
        $(function () {

            $('input.num_only').on('keyup', function () {
                var cnt = $(".exam input.num_sum").length;
                console.log(cnt);

                for (var i = 1; i < cnt; i++) {
                    var sum = parseInt($(this).val() || 0);
                    sum++
                    console.log(sum);
                }

                var sum1 = parseInt($("#portion").val() || 0); // input 값을 가져오며 계산하지만 값이 없을경우 0이 대입된다  뒷부분에 ( || 0 ) 없을경우 합계에 오류가 생겨 NaN 값이 떨어진다
                var sum2 = parseInt($("#portion2").val() || 0);
                var sum3 = parseInt($("#portion3").val() || 0);
                var sum4 = parseInt($("#portion4").val() || 0);
                var sum5 = parseInt($("#portion5").val() || 0);
                var sum6 = parseInt($("#portion6").val() || 0);
                var sum7 = parseInt($("#portion7").val() || 0);

                var sum = sum1 + sum2 + sum3 + sum4 + sum5 + sum6 + sum7;
                console.log(sum);
                $("#portion_total").val(sum);
            });



        });</script>

</head>

<body>
    <section id="wrap">
        <h1 class="fontsize0">Portfolio Mixor</h1>
        <h2 class="fontsize0">포트폴리오 믹서</h2>
        <header id="header">
            <strong class="logo_box"><img src="logo.png" alt="포트폴리오"></strong>

        </header>
        <section id="container">
            <section class="section1">
                <h1>포트폴리오 믹서기</h1>

                </div>
                <p>
                    아래 빈칸에 포트폴리오 백테스트에 필요한 주식들을 선택하시고, 운용기간과 금액, 비중을 설정해주세요.
                </p>
            </section>
            <section id="input_data">
                <section class="section2">
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">시작연도</label>
                        <select class="form-control" id="exampleFormControlSelect1">
                            <option>2000</option>
                            <option>2002</option>
                            <option>2003</option>
                            <option>2004</option>
                            <option>2005</option>
                            <option>2006</option>
                            <option>2008</option>
                            <option>2009</option>
                            <option>2010</option>
                            <option>2011</option>
                            <option>2012</option>
                            <option>2013</option>
                            <option>2014</option>
                            <option>2015</option>
                            <option>2016</option>
                            <option>2017</option>
                            <option>2018</option>
                            <option>2019</option>

                        </select>
                    </div>
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">마지막 연도</label>
                        <select class="form-control" id="exampleFormControlSelect2">
                            <option>2020</option>
                            <option>2019</option>
                            <option>2018</option>
                            <option>2017</option>
                            <option>2015</option>
                            <option>2014</option>
                            <option>2013</option>
                            <option>2012</option>
                            <option>2011</option>
                            <option>2010</option>
                            <option>2009</option>
                            <option>2008</option>
                            <option>2007</option>
                            <option>2006</option>
                            <option>2005</option>
                            <option>2004</option>
                            <option>2003</option>
                            <option>2002</option>
                            <option>2001</option>

                        </select>
                    </div>
                    <div class="input-group mb-3">
                        <p>시작금액 </p>
                        <div class="input-group-prepend">
                            <span class="input-group-text">￦</span>
                        </div>
                        <input type="text" onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ aria-label="Amount (to
                        the nearest dollar)" id="start_money">
                        <div class="input-group-append">
                            <span class="input-group-text">.00</span>
                        </div>
                    </div>
                    <div class=exam>
                        <nav class="navbar navbar-light bg-light justify-content-between"
                            style="font-size: 10px; color:black;">
                            <a class="navbar-brand"> 종목 1</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search" id="stock_1">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input value="" type="text" value="" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion"
                                                name="portion">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 2</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input value="" type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion2"
                                                name="portion2">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 3</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input value="" type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion3"
                                                name="portion3">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 4</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input value="" type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion4"
                                                name="portion4">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 5</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion5"
                                                name="portion5">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 6</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion6"
                                                name="portion6">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 7</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion7"
                                                name="portion7">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 8</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion8">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 9</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion9">
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">종목 10</a>
                            <form class="form-inline">
                                <input class="form-control mr-sm-2 autosearch" type="search" placeholder="종목검색"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">찾기</button>
                                <nav class="navbar navbar-light bg-light">
                                    <form class="form-inline">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                            </div>
                                            <input type="text" class="form-control num_only num_sum"
                                                onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ placeholder="비율"
                                                aria-label="Username" aria-describedby="basic-addon1" id="portion10">
                                            <div id="han_money" class="text-right"></div>
                                        </div>
                                    </form>
                                </nav>
                            </form>
                        </nav>
                        <nav class="navbar navbar-light bg-light justify-content-between">
                            <a class="navbar-brand">총 비율</a>
                            <form class="form-inline">
                                <div class="input-group" id="space2">
                                    <div class="input-group-prepend" id="space2">
                                        <span class="input-group-text" id="basic-addon1">%</span>
                                    </div>
                                    <input id="space3" type="text"
                                        onKeyup="this.value=this.value.replace(/[^0-9]/g,'');"/ class="form-control"
                                        placeholder="비율" aria-label="Username" aria-describedby="basic-addon1"
                                        style="background-color: rgb(222, 222, 222);" id="portion_total" readonly>
                                    <div id="han_money" class="text-right"></div>
                                </div>
                            </form>
                        </nav>
                    </div>
                    <div id="button_group">
                        <button onclick="openclose()" type="button" class="btn btn-lg btn-primary">분석하기</button>
                        <button onclick="refresh()" type="button" class="btn btn-secondary btn-lg">새로고침</button>
                    </div>
                </section>
            </section>
        </section>
        <section id="second_page">
            <h1>포트폴리오 분석결과</h1>
            <h3> (1) 포트폴리오 구성</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">종목번호</th>
                        <th scope="col">종목명</th>
                        <th scope="col">비율 %</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">1</th>
                        <td>Mark</td>
                        <td>Otto</td>
                        <td>@mdo</td>
                    </tr>
                    <tr>
                        <th scope="row">2</th>
                        <td>Jacob</td>
                        <td>Thornton</td>
                        <td>@fat</td>
                    </tr>
                    <tr>
                        <th scope="row">3</th>
                        <td>Larry</td>
                        <td>the Bird</td>
                        <td>@twitter</td>
                    </tr>
                </tbody>
            </table>
            <div id="piechart"></div>
            <div>
                <h3>(2) 퍼포먼스</h3>
            </div>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">포트폴리오</th>
                        <th scope="col">시작 금액</th>
                        <th scope="col">종료 금액</th>
                        <th scope="col">CAGR</th>
                        <th scope="col">최고의 해</th>
                        <th scope="col">최악의 해</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">1</th>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                </tbody>
            </table>
            <div id="chart_div"></div>

        </section>
    </section>

</body>

</html>